# Downloads Directory Configuration

# Force download of APK files
<Files *.apk>
    Header set Content-Disposition "attachment"
    Header set Content-Type "application/vnd.android.package-archive"
</Files>

# Prevent directory browsing
Options -Indexes

# Add proper headers for APK files
<IfModule mod_headers.c>
    <FilesMatch "\.(apk)$">
        Header set Cache-Control "public, max-age=3600"
        Header set X-Content-Type-Options nosniff
        Header set X-Frame-Options DENY
        Header set X-XSS-Protection "1; mode=block"
    </FilesMatch>
</IfModule>

# Security headers
<IfModule mod_headers.c>
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Enable GZIP compression for text files
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Redirect short URLs
RewriteEngine On

# Redirect /c/[code] to get-code.html with code parameter
RewriteRule ^c/([0-9]{5})$ /get-code.html?code=$1 [R=302,L]

# Redirect /tv to firestick-code.html
RewriteRule ^tv/?$ /firestick-code.html [R=302,L]

# Redirect /android to download-android.html  
RewriteRule ^android/?$ /download-android.html [R=302,L]

# Redirect /help to instructions.html
RewriteRule ^help/?$ /instructions.html [R=302,L]